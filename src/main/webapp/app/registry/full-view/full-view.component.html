<div >
    <h4 jhiTranslate="global-view.companies">Company</h4>
</div>
<table class="table table-bordered table-condensed table-responsive">
    <thead>
        <th  style="width: 20%">
            <label *jhiHasAnyAuthority="['ROLE_ADMIN']"jhiTranslate="global-view.company-filter">COMPANY</label>
            <input *jhiHasAnyAuthority="['ROLE_ADMIN']" type="text" class="form-control" [(ngModel)]="searchCompany" placeholder="*">
        </th>
        <th style="width: 20%">
            <div class="input-group">
                <div class="input-group-addon"> <label jhiTranslate="global-view.customer-filter">CUSTOMER</label>
                    <input  type="text" class="form-control" [(ngModel)]="searchCustomer" placeholder="*">
                    <label >Enable?</label>
                    <select class="form-control" [(ngModel)]="searchCustomerState" >
                        <option *ngFor="let item of enabledStateList" [ngValue]="item">{{item}}</option>
                    </select>
                </div>
            </div>
        </th>
        <th style="width: 20%" >
            <label jhiTranslate="global-view.project-filter">PROJECT</label>
            <input  type="text" class="form-control" [(ngModel)]="searchProject" placeholder="*">
            <label >Enable?</label>
            <select class="form-control" [(ngModel)]="searchProjectState" >
                <option *ngFor="let item of enabledStateList" [ngValue]="item">{{item}}</option>
            </select>
        </th>
        <th style="width: 20%" >
            <label jhiTranslate="global-view.job-filter">PROJECT</label>
            <input  type="text" class="form-control" [(ngModel)]="searchJob" placeholder="*">
            <label >Enable?</label>
            <select class="form-control" [(ngModel)]="searchJobState" >
                <option *ngFor="let item of enabledStateList" [ngValue]="item">{{item}}</option>
            </select>
        </th>
    </thead>
    <tbody>
        <!-- company container-->
        <ng-container *ngFor="let company of showCompanies | companyFilter: searchCompany">
          
            <tr id="{{company.id}}"style="border: none!important;background-color: #cacaca"> 
                <td *ngIf="showCompanies && showCompanies.length>0" style="border: none!important;">
                    <div *ngIf="!companyHidden; else hiddeCompany">
                        <fa-icon (click)="switchCompanyHidden()"  style="cursor: pointer" [icon]="'chevron-circle-down'" [fixedWidth]="true"></fa-icon> 
                        <a [routerLink]="['/company', company.id, 'edit']">{{ company.name }}</a>
                    </div>
                    <td colspan="1"style="border-left: none!important;border-right: none!important">
                        <!-- <a routerLink="{{customerId(customer.id)}}">  -->
                        <a [routerLink]="['/customer/new/company', company.id]">
                            <fa-icon  style="cursor: pointer" [icon]="'plus-circle'" [fixedWidth]="true"></fa-icon>
                        </a>
                    </td>
                </td>
                <ng-template  #hiddeCompany>
                    <td style="border: none!important;">
                        <fa-icon (click)="switchCompanyHidden()" style="cursor: pointer" [icon]="'chevron-circle-up'" [fixedWidth]="true"></fa-icon> 
                        <a [routerLink]="['/company', company.id, 'edit']">{{ company.name }}</a>
                    </td>
                </ng-template>
                <td colspan="4" style="background-color: #cacaca;border-left: none!important;border-right: none!important;"></td>
                    
            </tr>
            <!-- customer container-->
            <ng-container  *ngFor="let customer of company.customers | customerFilter: searchCustomer: searchCustomerState">
                
                    <tr id="{{customer.id}}" *ngIf="!companyHidden"style="border-left: none!important;" >
                        <td colspan="1" style="border-left: none!important;border-right: none!important;"></td>
                        <div *ngIf="!customerHidden; else hiddeCustomer" style="border: none!important;background-color:  #f5f5ee;">
                           
                            <td style="border-left: none!important;border-right: none!important;background-color:  #f5f5ee;" >
                                <fa-icon (click)="switchCustomerHidden()" style="cursor: pointer" [icon]="'chevron-circle-down'" [fixedWidth]="true"></fa-icon> 
                                <a [routerLink]="['/customer', customer.id, 'edit']">{{customer.name}}</a>
                            </td>
                            <td colspan="1"style="border-left: none!important;border-right: none!important">
                                <!-- <a routerLink="{{customerId(customer.id)}}">  -->
                                <a [routerLink]="['/project/new/customer', customer.id]">
                                    <fa-icon  style="cursor: pointer" [icon]="'plus-circle'" [fixedWidth]="true"></fa-icon>
                                </a>
                            </td>
                        </div>
                        <ng-template #hiddeCustomer>
                            <td style="border-left: none!important;border-right: none!important;background-color:  #f5f5ee;">
                                <fa-icon (click)="switchCustomerHidden()" style="cursor: pointer" [icon]="'chevron-circle-up'" [fixedWidth]="true"></fa-icon> 
                                <a [routerLink]="['/customer', customer.id, 'edit']">{{customer.name}}</a>
                            </td>
                        </ng-template>
                        <td colspan="3" style="border-left: none!important;border-right: none!important;background-color: #f5f5ee;"></td>
                    </tr>
                <!-- project container -->
                <ng-container *ngFor=" let project of customer.projects| projectFilter: searchProject: searchProjectState">
                    <tr id="{{project.id}}"*ngIf="!companyHidden && !customerHidden"  >
                        <td colspan="2" style="border-left: none!important;border-right: none!important;background-color: #fdfdfd"></td>
                        <div *ngIf="!projectHidden; else hiddeProject" style="background-color: #fdfdfd">
                            <td style="border-left: none!important;border-right: none!important;">
                                <fa-icon (click)="switchProjectHidden()" style="cursor: pointer"  [icon]="'chevron-circle-down'" [fixedWidth]="true"></fa-icon> 
                                <a [routerLink]="['/project', project.id, 'edit']">   {{project.name}}</a>
                            </td>
                            <td colspan="1"style="border-left: none!important;border-right: none!important">
                                <a [routerLink]="['/job/new/project', project.id]">
                                    <fa-icon  style="cursor: pointer" [icon]="'plus-circle'" [fixedWidth]="true"></fa-icon>
                                </a>
                            </td>
                        </div>
                        <ng-template #hiddeProject>
                            <td style="border-left: none!important;border-right: none!important;background-color: #fdfdfd" >
                                <fa-icon (click)="switchProjectHidden()" style="cursor: pointer"  [icon]="'chevron-circle-up'" [fixedWidth]="true"></fa-icon> 
                                <a [routerLink]="['/project', project.id, 'edit']">   {{project.name}}</a>
                            </td>
                        </ng-template>
                    </tr>
                    <ng-container *ngFor=" let job of project.jobs| jobFilter: searchJob: searchJobState">

                        <tr *ngIf="!companyHidden && !customerHidden && !projectHidden"style="border-left: none!important;" >
                            <td colspan="3" style="border: none!important;"></td>
                            <td style="border-bottom: none!important;border-left: none!important;">
                                <a [routerLink]="['/job', job.id, 'edit']">   {{job.name}}</a>
                            </td>
                        </tr>
                        <!-- fin job container -->
                    </ng-container>
                    <!-- end project -->
                </ng-container>
                <!-- end customer -->
            </ng-container>
            <!-- end company -->
        </ng-container>
    </tbody>
    <tfoot>

    </tfoot>
</table>
